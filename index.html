<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>myMemoPad</title>
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
</head>
<body>
<header>
<h1>MemoPad</h1>
</header>
<main>

    <div class="test">
<p>11111</p>
<p>22222</p>
    </div>


    <canvas id="mycanvas" width="800" height="500"></canvas>
    <input type="text" id="key" placeholder="title">  
    <input type="date">
    <input type="range">
    <p>付箋のいろは？</p>
    <input type="color" id="color">
    <textarea id="memo" placeholder="本文"></textarea>
    <ul>
        <li id="save">Save</li>
        <li id="clear">Clear</li>
    </ul>
    
    <p id="message" style="display: none;">Saving</p>
</main>
<table id="list">
<!-- ここに追加データが挿入される -->
</table>
<script>

//this
$(".test p").on("click", function(){
   const aaa=$(this).text();

        const key =localStorage.key("color");
        const value = localStorage.getItem(key);//色が入る

        $(this).css("color", value);

        console.log(aaa,"thisは何ですか") 
        

    })



//1.Save クリックイベント

$("#save").on("click",function(){
 
    const key =$("#key").val();
    console.log(key,"key");

    const value =$("#memo").val();
    console.log(value,"value");

    const antatsu =$("#aaa").val();
    console.log(antatsu,"value");

    localStorage.setItem('json',  JSON.stringify(key, value,antatsu));

//localstrageの番号と紐つけ
    // let number=0; 
    // number=localStorage.getItem(i)+1;
 //   <th><input type="text" value=${number}></th> 


//変数にhtmlを組み合わせるテクニック
       // テンプレートリテラルという新しい書き方（推奨！！）
       const html = `
        <tr>
          <th><input type="text" value=""></th> 
            <td><input type="text" value=${key}></td> 
            <td><input type="text" value=${value}></td> 
            <td><input type="text" value=${antatsu}></td> 
            <td>><input type="button" value=del></td>
            <td>><input type="button" value=upload></td>
        </tr>
        `;
        
        
        // htmlに表示＝jQueryで処理をしたものをhtmlに埋め込む
        $("#list").append(html);
      });


    //2.clear クリックイベント

    $("#clear").on("click",function(){
    
        localStorage.clear();
        $("#list").empty();
})

//3.ページ読み込み：保存データ取得表示

    for(let i=0; i<localStorage.length; i++){   
        const key =localStorage.key(i);
        const value = localStorage.getItem(key);
        const antatsu = localStorage.getItem(key);
        // const del = localStorage.getItem(key);
        // const upload =localStorage.getItem(key);
        const html = `
        <tr>
          <th><input type="text" value=${i}></th> 
          <td><input type="text" value=${key}></td> 
            <td><input type="text" value=${value}></td>
            <td><input type="text" value=${antatsu}></td> 
            <td><input type="button" value=del></td>
            <td><input type="button" value=upload></td>
        </tr>
        `;

        // htmlに表示＝jQueryで処理をしたものをhtmlに埋め込む
        $("#list").append(html);


        let x = i;

switch (i) {
  case '0':
    console.log('オレンジです');
    break;
  case '2':
    console.log('バナナです');
    break;
  case '3':
    console.log('メロンです');
    break;
} 


      };

//データ削除
$("tr").on("click", function(){
  const kagi=$(this).children('th');
  console.log(kagi,"this場所のこと")
  localStorage.removeItem(kagi)
//$(this).empty();  
    
    });
    //鍵が入る
    // const kagi=$(this).children('th').text();//タグの中身を取得したい
  // $("td").empty();
  // $("th").empty();



      // 色を押したところチェック
      $('#color').on('change', function(){
        const vv = $(this).val(); //何が取得できるかチェック　inputタグなのでval()を使う

        localStorage.setItem('color', vv)
        console.log(vv, 'color')
      })


// //選択1 del
// $("button").on("click", function(){
// const del=$(this).children('th').text();//タグの中身を取得したい

// console.log(del, 'delをチェック');

// });


// // //選択2 update
// $("#update").on("click", function(){
// const update=$(this).children('th').text();//タグの中身を取得したい

// console.log(update, 'updateをチェック');
// });

//連想配列 とりあえず移す
// const data = [];
// data.push({zip:'102-0072', address:'東京都千代田区飯田橋'});
// data.push({zip:'102-0082', address:'東京都千代田区一番町'});
// data.push({zip:'101-0047', address:'東京都千代田区内神田'});
// localStorage.setItem('json',  JSON.stringify(data));
// console.log(data);

$('th').on('change', function(){
const key = localStorage.getItem('json');
key = JSON.parse(data);
for (const i = 0; i < key.length; i++) {
  for (const key in data[i]) {
    console.log(data[i][key]);
  }
}});

// //memo↓
//setitem　更新 parent
//thisは押したものを得れる（"付箋".on）
//allow関数
//診断アプリ（ルート作ることができる）





//画像保存
//window.onload = function () {
  //    const canvas = document.getElementById("mycanvas");
  //    const ctx = canvas.getContext("2d");
//    const img = new Image();

//img.onload = function () {
  //      ctx.drawImage(img, 0, 0);
    //    window.localStorage["key"] = canvas.toDataURL();
    //    document.getElementById().src = window.localStorage["key"];
    //  };
    //  img.src = "";
   // }

//画像取得



//一定時間に自動保存

//(function autoSave(){
  //  localStorage.setItem("key", $("#key").val());
  //  $("message").show().hide(200);
  //  setTimeout(autoSave, 1000);
//})();


</script>


<script src="practice.js"></script>

<footer><small>G's</small></footer>
</body>
</html>
